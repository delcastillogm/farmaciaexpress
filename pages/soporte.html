<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Centro de Soporte – Farmacia Express</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/styles.css">
  <style>
    .card-soft {
      border-radius: 1rem;
      box-shadow: 0 2px 12px 0 rgba(22,119,255,0.07);
      background: #fff;
      border: none;
    }
    .btn-contact { justify-content: flex-start; }
    .btn-contact.active { background: #1976d2; color: #fff; border-color: #1976d2; }
    .btn-contact.active .text-muted { color: #e3f0ff !important; }
    .badge-soft { background: #e3f0ff; color: #1976d2; }
    .chat-bubble { max-width: 70%; padding: .5rem .75rem; border-radius: 12px; }
    .chat-user { background: #1976d2; color: #fff; border-top-right-radius: 2px; }
    .chat-support { background: #f1f3f5; border-top-left-radius: 2px; }
    .scroll-area { height: 320px; overflow: auto; }
    .accordion-button:focus { box-shadow: none; }
    .accordion-button:not(.collapsed) { color: #1976d2; background: #e3f0ff; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4 py-3">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2 fw-semibold fs-4" href="../index.html" style="color:#1976d2;">
        <i class="fa-solid fa-capsules text-primary fs-2"></i>
        Farmacia Express
      </a>
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarMenu">
        <ul class="navbar-nav align-items-center gap-2">
          <li class="nav-item"><a href="../index.html" class="btn btn-outline-primary px-3">Home</a></li>
          <li class="nav-item"><a href="intranet.html" class="btn btn-outline-primary px-3">Intranet</a></li>
          <li class="nav-item"><a href="soporte.html" class="btn btn-primary px-3">Soporte</a></li>
          <li class="nav-item"><a href="login.html" class="btn btn-outline-secondary px-3">Iniciar sesión</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container pb-5">
    <h2 class="fw-semibold mb-4">Centro de Soporte</h2>

    <div class="row g-4">
      <div class="col-lg-4">
        <div class="card card-soft">
          <div class="card-body">
            <h6 class="fw-semibold mb-3"><i class="bi bi-headphones me-2"></i>Contacto</h6>

            <div class="d-grid gap-2">
              <button id="btnChat" class="btn btn-outline-secondary btn-contact active" onclick="selectContact('chat')">
                <i class="bi bi-chat-dots me-2"></i> Chat en vivo
                <span class="badge badge-soft ms-auto">Activo</span>
              </button>

              <button id="btnPhone" class="btn btn-outline-secondary btn-contact" onclick="selectContact('phone')">
                <i class="bi bi-telephone me-2"></i> Teléfono: +51 900 123 456
              </button>

              <button id="btnEmail" class="btn btn-outline-secondary btn-contact" onclick="selectContact('email')">
                <i class="bi bi-envelope me-2"></i> Email: soporte@farmaciaexpress.com
              </button>
            </div>

            <hr class="my-4">

            <div class="text-muted small">
              <div class="fw-semibold mb-2">Horarios de atención:</div>
              <div>Lunes a Viernes: 8:00 - 22:00</div>
              <div>Sábados: 9:00 - 20:00</div>
              <div>Domingos: 10:00 - 18:00</div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-8">
        <div class="card card-soft" id="panelChat">
          <div class="card-header bg-white">
            <div class="fw-semibold">Chat en vivo</div>
            <div class="text-muted small">Tiempo de respuesta promedio: 2-3 minutos</div>
          </div>
          <div class="card-body d-flex flex-column">
            <div id="chatArea" class="scroll-area mb-3"></div>
            <div class="input-group">
              <input id="chatInput" class="form-control" placeholder="Escribe tu mensaje…"
                     onkeydown="if(event.key==='Enter'){sendMsg()}">
              <button class="btn btn-primary" onclick="sendMsg()"><i class="bi bi-send"></i></button>
            </div>
          </div>
        </div>

        <div class="card card-soft d-none" id="panelPhone">
          <div class="card-body text-center py-5">
            <i class="bi bi-telephone fs-1 d-block mb-3"></i>
            <h5 class="fw-semibold">Llamar a soporte</h5>
            <p class="text-muted">Llama al +51 900 123 456 para hablar directamente con nuestro equipo</p>
            <a href="tel:+51900123456" class="btn btn-dark"><i class="bi bi-telephone me-2"></i>Llamar ahora</a>
          </div>
        </div>

        <div class="card card-soft d-none" id="panelEmail">
          <div class="card-body text-center py-5">
            <i class="bi bi-envelope fs-1 d-block mb-3"></i>
            <h5 class="fw-semibold">Enviar email</h5>
            <p class="text-muted">Envía un email a <strong>soporte@farmaciaexpress.com</strong> con tu consulta</p>
            <a href="mailto:soporte@farmaciaexpress.com" class="btn btn-dark">
              <i class="bi bi-envelope me-2"></i>Abrir cliente de email
            </a>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="card card-soft">
          <div class="card-body">
            <h6 class="fw-semibold mb-3">Preguntas Frecuentes</h6>
            <div class="accordion" id="faq">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#f1">
                    ¿Cuánto tiempo tarda la entrega?
                  </button>
                </h2>
                <div id="f1" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-muted">
                    Nuestro tiempo de entrega estándar es de 30-45 minutos para Lima y alrededores.
                    Para otras ciudades puede ser de 1-2 horas.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#f2">
                    ¿Puedo cancelar mi pedido?
                  </button>
                </h2>
                <div id="f2" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-muted">
                    Puedes cancelar tu pedido hasta 5 minutos después de confirmarlo.
                    Después de ese tiempo, contacta con soporte para verificar si es posible.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#f3">
                    ¿Qué pasa si no estoy en casa cuando llega el repartidor?
                  </button>
                </h2>
                <div id="f3" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-muted">
                    El repartidor te llamará antes de llegar. Si no estás disponible, puedes reprogramar la entrega
                    o designar a otra persona para recibir el pedido.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#f4">
                    ¿Aceptan recetas médicas?
                  </button>
                </h2>
                <div id="f4" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-muted">
                    Sí, aceptamos recetas médicas válidas. Puedes subirla durante el proceso de compra o
                    enviársela al repartidor al momento de la entrega.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#f5">
                    ¿Cómo puedo pagar?
                  </button>
                </h2>
                <div id="f5" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-muted">
                    Aceptamos tarjetas de crédito/débito, transferencias bancarias y efectivo en la entrega.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-dark text-white py-4 text-center mt-5">
    © 2025 Farmacia Express. Todos los derechos reservados.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let selected = 'chat';
    const chatArea = document.getElementById('chatArea');

    addSupport('¡Hola! Soy Ana del equipo de soporte de Farmacia Express. ¿En qué puedo ayudarte hoy?');

    function selectContact(kind){
      selected = kind;
      document.querySelectorAll('.btn-contact').forEach(b=>b.classList.remove('active'));
      document.getElementById('btnChat').classList.toggle('active', kind==='chat');
      document.getElementById('btnPhone').classList.toggle('active', kind==='phone');
      document.getElementById('btnEmail').classList.toggle('active', kind==='email');

      document.getElementById('panelChat').classList.toggle('d-none', kind!=='chat');
      document.getElementById('panelPhone').classList.toggle('d-none', kind!=='phone');
      document.getElementById('panelEmail').classList.toggle('d-none', kind!=='email');
    }

    function addSupport(text){
      const wrap = document.createElement('div');
      wrap.className = 'd-flex mb-2';
      wrap.innerHTML = `<div class="chat-bubble chat-support"><div>${text}</div>
                        <div class="small text-muted mt-1">${timeNow()}</div></div>`;
      chatArea.appendChild(wrap);
      chatArea.scrollTop = chatArea.scrollHeight;
    }
    function addUser(text){
      const wrap = document.createElement('div');
      wrap.className = 'd-flex mb-2 justify-content-end';
      wrap.innerHTML = `<div class="chat-bubble chat-user"><div>${text}</div>
                        <div class="small opacity-75 mt-1">${timeNow()}</div></div>`;
      chatArea.appendChild(wrap);
      chatArea.scrollTop = chatArea.scrollHeight;
    }
    function timeNow(){
      const d=new Date(); return d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    }

    function sendMsg(){
      if(selected!=='chat') { selectContact('chat'); }
      const input = document.getElementById('chatInput');
      const txt = (input.value||'').trim();
      if(!txt) return;
      addUser(txt);
      input.value='';

      setTimeout(()=>addSupport('Gracias por tu mensaje. Un agente revisará tu consulta y te responderá en breve. ¿Algo más en lo que pueda ayudarte?'), 800);
    }
  </script>
</body>
</html>
